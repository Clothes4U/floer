let searchFunc=function(e,t,n){"use strict";const l=document.getElementById("nfound"),c=document.getElementById("ninit"),s=document.getElementById(t),r=document.getElementById(n);if(!(l&&c&&s&&r))return;const o=l.innerHTML,a=c.innerHTML;r.innerHTML="<ul><span class='local-search-empty'>"+a+"<span></ul>",$.ajax({url:e,dataType:"xml",success:function(e){const t=$("entry",e),n=[];for(let e=0;e<t.length;e++){const l=t[e],c=$("title",l).text().trim()||"Untitled",s=$("content",l).text().trim().replace(/<[^>]+>/g,""),r=$("url",l).text();n.push({title:c,titleLower:c.toLowerCase(),content:s,contentLower:s.toLowerCase(),url:r})}r.innerHTML="";let l=null;s.addEventListener("input",function(){clearTimeout(l),l=setTimeout(function(){const e=s.value.trim();if(e.length<=0)return void(r.innerHTML="");const t=e.toLowerCase().split(/[\s\-]+/);let l='<ul class="search-result-list">',c=!1;for(let e=0;e<n.length;e++){const s=n[e];let r=!0,o=-1;if(""!==s.contentLower)for(let e=0;e<t.length;e++){const n=t[e],l=s.titleLower.indexOf(n),c=s.contentLower.indexOf(n);if(l<0&&c<0){r=!1;break}0===e&&c>=0&&(o=c)}else r=!1;if(r){if(c=!0,l+="<li><a href='"+s.url+"' class='search-result-title' target='_blank'><div>"+s.title+"</div></a>",o>=0){let e=o-20,n=o+80;e<0&&(e=0),0===e&&(n=100),n>s.content.length&&(n=s.content.length);let c=s.content.substr(e,n);for(let e=0;e<t.length;e++){const n=t[e],l=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");c=c.replace(l,'<em class="search-keyword">$&</em>')}l+='<p class="search-result">'+c+"...</p>"}l+="</li>"}}l+="</ul>",r.innerHTML=c?l:"<ul><span class='local-search-empty'>"+o+"<span></ul>"},150)})}}),$(document).on("click","#local-search-close",function(){$("#local-search-input").val(""),$("local-search-result").html("")})},getSearchFile=function(){searchFunc("/search.xml","local-search-input","local-search-result")};